<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Trivia Quiz</title>
    <meta name="theme-color" content="#17a2b8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="container">

    <div class="flex-container">
        <div class="stopwatch">
            <h6 class="text-light text-center" id="stop">
                <div class="inner" style="padding: 20px 0 20px 0;" id="timer">    
                    
                </div>
            </h6>
        </div>
        <div class="heading">
            <h4 class="text-center  text-light">
                    <div class="inner" style="padding: 20px 0 20px 0;" id="quiz-name">
                        -
                    </div>
            </h4>
        </div>
        <div class="scoreBoard">
                <h5 class="text-light text-center">
                        <div class="inner" style="padding: 20px 0 20px 0;" id="score">    
                            0pts.
                        </div>
                    </h5>
        </div>
    </div>

    <div class="card">
        <div class="card-body text-center">
            <h5 class="card-title">
                <span id="quesNo">1</span>/<span id="totalQues">10</span>
            </h5>
            <div class="progress">
                <div class="progress-bar progress-bar-striped progress-bar-animated bg-info" role="progressbar" style="width: 0%" id="progress"></div>
            </div>
            <br>
            <h6 class="card-subtitle text-muted" id="question">
                    -
            </h6>
        </div>
    </div>
    <br>
    <!-- <div class="row">
        <div class="col-6 text-center">
                <button class="btn btn-primary btn-block">Lorem, ipsum dolor.</button>
        </div>
        <div class="col-6 text-center">
                <button class="btn btn-danger btn-block">Lorem, ipsum dolor.</button>
        </div>
    </div>
    <br>
    <div class="row">
            <div class="col-6 text-center">
                    <button class="btn btn-primary btn-block">Lorem, ipsum dolor.</button>
            </div>
            <div class="col-6 text-center">
                    <button class="btn btn-warning btn-block">Lorem, ipsum dolor.</button>
            </div>
    </div> -->
    <ul class="list-group text-center" id="choices">
        <!-- The choices would be displayed inside it! -->
    </ul>
    <br>
    <div class="row justify-content-center">
        <div class="col-5">
            <button class="btn btn-primary btn-block" id="prev" style="visibility: hidden;">
                Previous
            </button>
        </div>
        <div class="col-5">
            <button class="btn btn-primary btn-block" id="next">
                Next
            </button>
        </div>
    </div>
</div>
<audio id="SunriseChord"><source src="sounds/SunriseChord.mp3"></audio>
<audio id="click"><source src="sounds/SatisfyingClick.mp3"></audio>
<audio id="scored"><source src="sounds/CoinsDropping.mp3"></audio>
<audio id="beep"><source src="sounds/beep-07.mp3"></audio>    
<audio id="beep2"><source src="sounds/beep-03.mp3"></audio>   
    <!-- <div class="circle-progress">

    </div> -->
    <!-- <script>
            // var time = 0;
            // var start = 10;
            var timer = document.getElementById("timer");
            var score = 0;
            var scoreText = document.getElementById("score");
            var correctAns = 0;
            // var bgTimer = document.getElementById("bg-timer");
            // console.log(timer);
            // function setTimer(){
            //     if(start == 0){
            //         timer.innerText = "0";
            //         setTimeout(function(){
            //             showCorrectAns();
            //         }, 1000);
            //         nextQues();
            //     }

            //     if(start > time){
            //         timer.innerText = start;
            //         start--;
            //     }
                
            //     // if(timer.innerText.includes("3")){
            //     //     timer.style.color = "white";
            //     //     bgTimer.style.backgroundColor = "#dc3545";
            //     // }
                
            //     // if(timer.innerText.includes("6")){
            //     //     timer.style.color = "#212529";
            //     //     bgTimer.style.backgroundColor = "#ffc107";
            //     // }

            //     // if(timer.innerText.includes("10")){
            //     //     timer.style.color = "white";
            //     //     bgTimer.style.backgroundColor = "#28a745";
            //     // }
            // }

            // setInterval(function(){
            //     setTimeout(function(){
            //         start = 10;
            //     }, 1000);
            //     setInterval("setTimer()", 1000);
            // }, 11000);

            var counter = 0;
            var timeLeft = 10;

            timer.innerText = timeLeft - counter;
            
            function timeIt(){
                if(timeLeft - counter == 0){
                    showCorrectAns();
                    document.getElementById("next").style.visibility = "visible";
                    return;
                }
                else{
                    counter++;
                    timer.innerText = timeLeft - counter;
                }
                if((timeLeft - counter) < 1){
                    document.getElementById("beep2").play();
                }
                else if((timeLeft - counter) < 4){
                    document.getElementById("beep").play();
                }
            }
            
            var countDown;

            function startTimer(){
                counter = 0;
                timer.innerText = timeLeft - counter;
                countDown = setInterval(timeIt, 1010);
            }
            
            var myQuestions = [
                    {
                        question: "What is 10/2?",
                        answers: [
                            '3',
                            '5',
                            '115'
                        ],
                        correctAnswer: '5'
                    },
                    {
                        question: "What is 30/3?",
                        answers: [
                            '13',
                            '50',
                            '10'
                        ],
                        correctAnswer: '10'
                    },
                    {
                        question: "Largest organ of the body.",
                        answers: [
                            'Stomach',
                            'Large Intestine',
                            'Small Intestine',
                            'None of these'
                        ],
                        correctAnswer: 'Small Intestine'
                    },
                    {
                        question: "Who assasinated Mahatma Gandhi?",
                        answers: [
                            'Dravid Singh',
                            'Nathuram Godsey',
                            'Ali Mirza',
                            'Kabeer Akbar'
                        ],
                        correctAnswer: 'Nathuram Godsey'
                    },
                    {
                        question: "Which is the largest planet in the solar system?",
                        answers: [
                            'Jupiter',
                            'Neptune',
                            'Earth',
                            'Mars'
                        ],
                        correctAnswer: 'Jupiter'
                    },
                    {
                        question: "NaCl is the chemical formula of",
                        answers: [
                            'Sodium Chloride',
                            'Nitrous Chloride',
                            'Ammonia',
                            'Nano calcium'
                        ],
                        correctAnswer: "Sodium Chloride"
                    },
                    {
                        question: "What is the first element on the periodic table?",
                        answers: ['Sodium',
                                  'Oxygen',
                                  'Hydrogen',
                                  'Helium'
                        ],
                        correctAnswer: 'Hydrogen'
                    },
                    {
                        question: "What type of electrical charge does a neutron have?",
                        answers: [
                            'Negative',
                            'Positive',
                            'No charge',
                            'Double negative'
                        ],
                        correctAnswer: 'No charge'
                    },
                    {
                        question: "Air is mostly made up of",
                        answers: [
                            'Oxygen',
                            'Carbon Dioxide',
                            'Argon',
                            'Nitrogen'
                        ],
                        correctAnswer: 'Nitrogen'

                    },
                    {
                        question: "Who was the first man to go in Space?",
                        answers: [
                            'Neil Armstrong',
                            'Rakesh Sharma',
                            'Yuri Gargin',
                            'Alexei Leonov'
                        ],
                        correctAnswer: 'Yuri Gargin'
                    }
                ];

            function showCorrectAns(){
                var choices = document.getElementById("choices");
                for(i = 0; i < choices.children.length; i++){
                    if(choices.children[i].textContent == myQuestions[currQ].correctAnswer){
                        choices.children[i].classList.add("bg-success");
                        choices.children[i].classList.add("text-light");
                    }
                }
            }
            
            var currQ = -1;

            // Goes to the next question
            function nextQues(){
                if(currQ == 8){
                    document.getElementById("next").addEventListener("click", function(){
                        localStorage.setItem("correctAns", correctAns);
                        localStorage.setItem("score", score);
                        document.location.replace("/score.html");                        
                    });
                }
                currQ++;
                var question = document.getElementById("question");
                var choices = document.getElementById("choices");
                var clickSound = document.getElementById("click");

                clickSound.play();
                // var quesNo = document.getElementById("quesNo");
                var progress = document.getElementById("progress");

                choices.innerHTML = "";

                progress.style.width = Number.parseInt(progress.style.width) + Number.parseInt(10)  + "%";

                quesNo.innerText = (currQ+1);

                question.innerText = myQuestions[currQ].question;
                for(i = 0; i < myQuestions[currQ].answers.length; i++){
                    // choices.children[i].id = i;
                    // choices.children[i].innerText = myQuestions[currQ].answers[i];
                    // choices.children[i].classList.remove("bg-success");
                    // choices.children[i].classList.remove("bg-danger");
                    // choices.children[i].classList.remove("text-light");
                    var choice = document.createElement("li");
                    choice.className = "list-group-item";
                    choice.id = i;
                    var text = document.createTextNode(myQuestions[currQ].answers[i]);
                    choice.appendChild(text);
                    choices.appendChild(choice);
                }

                addCheckAns();
                document.getElementById("next").style.visibility = "hidden";
                startTimer();
            }

            // Goes back to the previous Question
            function prevQues(){
                currQ--;
                var question = document.getElementById("question");
                var choices = document.getElementById("choices");
                var quesNo = document.getElementById("quesNo");
                var progress = document.getElementById("progress");

                choices.innerHTML = "";

                progress.style.width = Number.parseInt(progress.style.width) - Number.parseInt(5)  + "%";
                
                quesNo.innerText = (currQ+1)+"/"+quesNo.innerText.split("/")[1];

                question.innerText = myQuestions[currQ].question;
                for(i = 0; i < myQuestions[currQ].answers.length; i++){
                    // choices.children[i].id = i;
                    // choices.children[i].innerText = myQuestions[currQ].answers[i];
                    // choices.children[i].classList.remove("bg-success");
                    // choices.children[i].classList.remove("bg-danger");
                    // choices.children[i].classList.remove("text-light");
                    var choice = document.createElement("li");
                    choice.className = "list-group-item";
                    choice.id = i;
                    var text = document.createTextNode(myQuestions[currQ].answers[i]);
                    choice.appendChild(text);
                    choices.appendChild(choice);
                }

                addCheckAns();
            }

            // Listens to click event on all the choices and sets background color to red or green depending on whether correct answer was clciked or not
            function checkAns(e){
                clearInterval(countDown);
                var elem = document.getElementById(e.target.id);
                var choices = document.getElementById("choices");
                var flag = 0;
                
                var clickSound = document.getElementById("click");

                clickSound.play();

                for(i = 0; i < choices.children.length; i++){
                    if(choices.children[i].classList.contains("bg-success") || choices.children[i].classList.contains("bg-danger")){
                        flag = 1;
                    }
                }
                if(flag == 0){
                    if(e.target.textContent == myQuestions[currQ].correctAnswer){
                            // alert("You got it right!");
                            elem.classList.add("bg-success");
                            elem.classList.add("text-light");
                            score += Number.parseInt(timer.innerText) * 2;
                            scoreText.innerText = score+"pts.";
                            var scoredSound = document.getElementById("scored");
                            correctAns++;
                            scoredSound.play();
                        }
                        else{
                            elem.classList.add("bg-danger");
                            elem.classList.add("text-light");
                            document.getElementById("beep2").play();
                            setTimeout(showCorrectAns, 300);
                        }
                        
                        document.getElementById("next").style.visibility = "visible";
                    }

                    if(currQ == 9){
                        document.getElementById("next").innerHTML = "Submit &#x27A1;&#xFE0F;";
                    }
                    else{
                        document.getElementById("next").innerText = "Next";
                    }
                }
            
            // Adds click event listeners to all the choices added using JavaScript
            function addCheckAns(){
                var choices = document.getElementById("choices");

                for(i = 0; i < choices.children.length; i++){
                    choices.children[i].addEventListener("click", checkAns);
                }
            }
            
            // Adds event listeners to next and previous buttons
            document.getElementById("next").addEventListener("click", nextQues);
            document.getElementById("prev").addEventListener("click", prevQues);

            //Starts the quiz
            function initQuiz(){
                nextQues();
            }

            initQuiz();
        </script> -->
        <script src="js/main.js"></script>
</body>
</html>